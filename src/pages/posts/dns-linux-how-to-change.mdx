---
description:
public: true
layout: ../../layouts/BlogPost.astro
title: How to change DNS on Linux
createdAt: 04/26/2024
updatedAt: 04/26/2024
tags:
- dns
- linux
- cli
slug: dns-linux-how-to-change
icon: SiLinux
---

### Temporarily change DNS on Linux

1. Edit the file `/etc/resolv.conf` with your favourite text editor:

```bash
vim /etc/resolv.conf
```

2. Add the following lines to the file:

```conf frame="code" ins={4, 7} title="resolv.conf" showLineNumbers
# Generated by NetworkManager

# Google Primary DNS
nameserver 8.8.8.8

# Cloudflare Primary DNS
nameserver 1.1.1.1
```

### Permanently change DNS on linux

1. Become root:

```bash
sudo -i
```

2. Edit `/etc/NetworkManager/system-connections/<connection_name>` with your favourite text editor:

```bash
vim /etc/NetworkManager/system-connections/<connection_name>
```

3. Add (change) the following line under the `[ipv4]` section:

```conf frame="code" ins={12} title="Wired Connection 1" showLineNumbers
[connection]
id=Wired connection 1
uuid=aaaaaaaa-bbbb-cccc-1111-222222222222
type=ethernet
autoconnect-priority=-999
interface-name=enp34s0
timestamp=1714051582

[ethernet]

[ipv4]
dns=8.8.8.8;1.1.1.2;
ignore-auto-dns=true
method=auto

[ipv6]
addr-gen-mode=default
method=auto

[proxy]
```

4. Save and exit

5. Exit root:

```bash
exit
```

5. Restart the network manager:

```bash
systemctl restart NetworkManager
```

References:
- https://unix.stackexchange.com/questions/494324/how-to-setup-dns-manually-on-linux
